<html dir="ltr"><head><title>Exercise - View replication status - Learn :: Reader View</title>
  <meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
  <style>
html {
  overflow: overlay;
}
body {
  -webkit-font-smoothing: antialiased;
  -moz-osx-font-smoothing: grayscale;
  margin: 30px auto 0 auto;
  padding: 10px;
}
body[data-mode="light"] {
  color:  #222;
  background-color:  whitesmoke;
}
body[data-mode="dark"] {
  color:  #eee;
  background-color:  #333;
}
body[data-mode="sepia"] {
  color:  #5b4636;
  background-color:  #f4ecd8;
}
body[data-mode="solarized-light"] {
  color:  #586e75;
  background-color:  #fdf6e3;
}
body[data-mode="nord-light"] {
  color:  #2e3440;
  background-color:  #e5e9f0;
}
body[data-mode="groove-dark"] {
  color:  #cec4ac;
  background-color:  #282828;
}
body[data-mode="solarized-dark"] {
  color:  #93a1a1;
  background-color:  #002b36;
}
body[data-mode="nord-dark"] {
  color:  #e5e9f0;
  background-color:  #2e3440;
}
@media print {
  body[data-mode="light"],
  body[data-mode="dark"],
  body[data-mode="sepia"],
  body[data-mode="solarized-light"],
  body[data-mode="nord-light"],
  body[data-mode="groove-dark"],
  body[data-mode="solarized-dark"],
  body[data-mode="nord-dark"] {
    color: #000;
    background-color: #fff;
  }
}
body[data-loaded=true] {
  
}
img {
  max-width: 100%;
  height: auto;
}
body[data-images=false] canvas,
body[data-images=false] svg,
body[data-images=false] img {
  display: none;
}
a {
  color: #0095dd;
  text-decoration: none;
}
#reader-domain {
  font-family: Helvetica, Arial, sans-serif;
  text-decoration: none;
  border-bottom-color: currentcolor;
  white-space: nowrap;
  overflow: hidden;
  text-overflow: ellipsis;
  width: 100%;
  display: inline-block;
  direction: ltr;
}
#reader-domain > span:first-child {
  font-size: 1.1em;
}
#reader-domain > span:last-child {
  font-size: 0.8em;
}
#reader-title {
  font-size: 1.6em;
  line-height: 1.25em;
  width: 100%;
  margin: 20px 0;
  padding: 0;
}
#reader-credits {
  font-size: 0.9em;
  line-height: 1.48em;
  margin: 0 0 10px 0;
  padding: 0;
  font-style: italic;
}
#reader-estimated-time {
  font-size: 0.85em;
  line-height: 1.48em;
  margin: 0 0 10px 0;
  padding: 0;
}
#reader-credits:empty {
  display: none;
}
body[data-speech="true"] .tts-box {
  position: absolute;
  left: 0;
  width: 100vw;
  height: 32px;
  z-index: 1;
  pointer-events: none;
  box-shadow: 0 0 0 1000vw rgba(128, 128, 128, 0.2);
}
body[data-speech="true"] .tts-word {
  position: absolute;
  z-index: 1;
  pointer-events: none;
  background-color: red;
  height: 2px;
}
.tts-word.hidden,
.tts-box.hidden {
  display: none;
}
body[data-speech="false"] .tts-speaking::after {
  display: none;
}
mark.hghlght {
  background-color: #ffff81;
}
</style>
  <style id="user-css">body {
  padding-bottom: 64px;
}
a:visited {
  color: #d33bf0;
}
a:link, a:link:hover, a:link:active {
  color: #0095dd;
}
a:link {
  text-decoration: none;
  font-weight: normal;
}
pre {
  white-space: pre-wrap;
}
pre code {
  background-color: #eff0f1;
  color: #393318;
  font-family: monospace;
  display: block;
  padding: 5px 10px;
}
body[data-mode="dark"] pre code {
  background-color: #585858;
  color: #e8e8e8;
}

/* CSS for sans-serif fonts */
body[data-font=sans-serif] {}
/* CSS for serif fonts */
body[data-font=serif] {}

/* CSS for "sepia" theme */
body[data-mode=sepia] {
}
/* CSS for "light" theme */
body[data-mode=light] {}
/* CSS for "dark" theme */
body[data-mode=dark] {}</style>
</head>
<body data-images="true" data-mode="sepia" data-font="sans-serif" data-loaded="true">
  <span></span> <!-- for IntersectionObserver -->
  <a id="reader-domain" href="https://docs.microsoft.com/en-us/learn/modules/provide-disaster-recovery-replicate-storage-data/3-exercise-change-replication-strategy">
    <span>docs.microsoft.com</span>
    <span>/en-us/learn/modules/provide-disaster-recovery-replicate-storage-data/3-exercise-change-replication-strategy</span>
  </a>
  <h1 dir="auto" id="reader-title">Exercise - View replication status - Learn</h1>
  <div dir="auto" id="reader-credits">cwatson-cat</div>
  <div dir="auto" id="reader-estimated-time">5-6 minutes</div>
  <hr>
  <div id="readability-page-1" class="page"><div id="main" role="main" data-bi-name="content" lang="en-us" dir="ltr">
		
		
		<ul>
			<li>7 minutes</li>
		</ul>
			<p>In this unit, you'll create a storage account and configure a blob container for it. You'll create a blob file and upload it to your storage account. You can then view the replication status in the Azure portal.</p>
<div>
<p> Important</p>
<p>You need your own Azure subscription to run this exercise, and you might incur charges.&nbsp;If you don't already have an Azure subscription, create a <a href="https://azure.microsoft.com/free/" data-linktype="external" target="az-portal">free account</a> before you begin.</p>
</div>
<h2 id="create-a-storage-account">Create a storage account</h2>
<p>Create a storage account with geo-zone-redundant storage (GZRS).</p>
<ol>
<li><p>Sign in to the <a href="https://portal.azure.com/" data-linktype="external">Azure portal</a>.</p>
</li>
<li><p>From the menu bar in the upper right, open <strong>Cloud Shell</strong>.</p>
</li>
<li><p>Set the resource group name.</p>
<pre tabindex="0"><code data-author-content="export RESOURCEGROUP=learn-storage-replication-rg
"><span><span>export</span> RESOURCEGROUP=learn-storage-replication-rg
</span></code></pre>
</li>
<li><p>To set the storage account name where you replace <em>storageaccountname</em> and the brackets with a unique Azure Storage account name, run this command.</p>
<pre tabindex="0"><code data-author-content="export AZURE_STORAGE_ACCOUNT=<storageaccountname>
"><span><span>export</span> AZURE_STORAGE_ACCOUNT=&lt;storageaccountname&gt;
</span></code></pre>
</li>
<li><p>Set the location. Replace the <strong>westus2</strong> value with a location near you.</p>
<pre tabindex="0"><code data-author-content="export LOCATION=westus2
"><span><span>export</span> LOCATION=westus2
</span></code></pre>
<p>The following list has some location values you can use:</p>
<ul>
<li>southeastasia</li>
<li>northeurope</li>
<li>westeurope</li>
<li>japaneast</li>
<li>uksouth</li>
<li>centralus</li>
<li>eastus2</li>
<li>westus2</li>
</ul>
</li>
<li><p>To create a resource group, run this command.</p>
<pre tabindex="0"><code data-author-content="az group create --name $RESOURCEGROUP --location $LOCATION
"><span><span>az group create </span><span>--name</span> <span>$RESOURCEGROUP</span> <span>--location</span> <span>$LOCATION</span>
</span></code></pre>
</li>
<li><p>To create a storage account, run this command.</p>
<pre tabindex="0"><code data-author-content="az storage account create \
--name $AZURE_STORAGE_ACCOUNT \
--resource-group $RESOURCEGROUP \
--location $LOCATION \
--sku Standard_GZRS \
--encryption-services blob \
--kind StorageV2
"><span><span>az storage account create </span>\
<span>--name</span> <span>$AZURE_STORAGE_ACCOUNT</span> \
<span>--resource-group</span> <span>$RESOURCEGROUP</span> \
<span>--location</span> <span>$LOCATION</span> \
<span>--sku</span> Standard_GZRS \
<span>--encryption-services</span> blob \
<span>--kind</span> StorageV2
</span></code></pre>
</li>
<li><p>For the rest of the steps in this exercise, you'll need your storage credentials. To list your storage account keys, run this command.</p>
<pre tabindex="0"><code data-author-content="az storage account keys list \
--account-name $AZURE_STORAGE_ACCOUNT \
--resource-group $RESOURCEGROUP \
--output table
"><span><span>az storage account keys </span>list \
<span>--account-name</span> <span>$AZURE_STORAGE_ACCOUNT</span> \
<span>--resource-group</span> <span>$RESOURCEGROUP</span> \
<span>--output</span> <span>table</span>
</span></code></pre>
</li>
<li><p>Copy the keys listed.</p>
</li>
<li><p>To hold your storage key, set an environment variable. Replace <em>account-key</em> and the brackets with one of your key values.</p>
<pre tabindex="0"><code data-author-content="export AZURE_STORAGE_KEY=&quot;<account-key>&quot;
"><span><span>export</span> AZURE_STORAGE_KEY=<span>"&lt;account-key&gt;"</span>
</span></code></pre>
</li>
</ol>
<h2 id="create-a-blob-container">Create a blob container</h2>
<p>To upload blobs to Azure Storage, you need a container. You use containers to logically group your blobs. A container helps you organize blobs, like a folder organizes files on your computer.</p>
<ol>
<li><p>To set a container name where you replace <em>blob-container-name</em> and the brackets with another name, run this command.</p>
<pre tabindex="0"><code data-author-content="export BLOB_CONTAINER_NAME=<blob-container-name>
"><span><span>export</span> BLOB_CONTAINER_NAME=&lt;blob-container-name&gt;
</span></code></pre>
</li>
<li><p>Run the following command to create a container for your storage account:</p>
<pre tabindex="0"><code data-author-content="az storage container create --account-key $AZURE_STORAGE_KEY --account-name $AZURE_STORAGE_ACCOUNT --name $BLOB_CONTAINER_NAME
"><span><span>az storage container create </span><span>--account-key</span> <span>$AZURE_STORAGE_KEY</span> <span>--account-name</span> <span>$AZURE_STORAGE_ACCOUNT</span> <span>--name</span> <span>$BLOB_CONTAINER_NAME</span>
</span></code></pre>
</li>
<li><p>When your storage account container has been created, you'll see this message returned in your terminal.</p>
<pre tabindex="0"><code data-author-content="{
    &quot;created&quot;: true
}
">{
    "created": true
}
</code></pre>
</li>
</ol>
<h2 id="create-a-file-blob">Create a file (blob)</h2>
<p>Your company uploads its music files as blobs in the container. A blob can represent a file of any type. For the purposes of this exercise, you'll upload a text file as a blob.</p>
<ol>
<li><p>To create a file you can upload to your storage account, run this command.</p>
<pre tabindex="0"><code data-author-content="cat > song.mp3
"><span>cat &gt; song.mp3
</span></code></pre>
</li>
<li><p>An empty file is created that you can write to. Enter <strong>This is a song!</strong>, select <kbd>Enter</kbd>, and then select <kbd>Ctrl+D</kbd>.</p>
</li>
<li><p>To see the contents of your <code>song.mp3</code> file, run this command.</p>
<pre tabindex="0"><code data-author-content="cat song.mp3
"><span>cat song.mp3
</span></code></pre>
</li>
<li><p>You'll see <strong>This is a song!</strong> returned to you in the terminal. You've created a file you can now upload to your storage account.</p>
</li>
</ol>
<h2 id="upload-your-file">Upload your file</h2>
<p>Upload the file to your storage account via your container.</p>
<ol>
<li><p>To upload your file, run this command.</p>
<pre tabindex="0"><code data-author-content="az storage blob upload \
    --container-name $BLOB_CONTAINER_NAME \
    --name song \
    --file song.mp3
"><span><span>az storage blob upload </span>\
    <span>--container-name</span> <span>$BLOB_CONTAINER_NAME</span> \
    <span>--name</span> song \
    <span>--file</span> song.mp3
</span></code></pre>
</li>
<li><p>When the upload is complete, to verify the file is in your storage account, run this command.</p>
<pre tabindex="0"><code data-author-content="az storage blob list \
--container-name $BLOB_CONTAINER_NAME  \
--output table
"><span><span>az storage blob list </span>\
<span>--container-name</span> <span>$BLOB_CONTAINER_NAME</span>  \
<span>--output</span> <span>table</span>
</span></code></pre>
</li>
<li><p>You'll see details about your file, like its name, blob type, and when it was last modified.</p>
</li>
</ol>
<h2 id="view-the-replication-status">View the replication status</h2>
<ol>
<li><p>Sign in to the <a href="https://portal.azure.com/" data-linktype="external">Azure portal</a>.</p>
</li>
<li><p>Select or search for <strong>Resource groups</strong>.</p>
</li>
<li><p>Select <strong>learn-storage-replication-rg</strong>.</p>
</li>
<li><p>Select the storage account you created from the list of resources in your resource group.</p>
</li>
<li><p>Under <strong>Settings</strong>, select <strong>Geo-replication</strong>. You see the replication status of your Azure Storage account's primary and secondary regions. If the status shows as <strong>available</strong> for a region, it means your region is responsive.</p>
</li>
<li><p>To ensure you're seeing the latest status updates, select <strong>Refresh</strong>.</p>
<p><span>
<img src="https://docs.microsoft.com/en-us/learn/modules/provide-disaster-recovery-replicate-storage-data/media/3-view-replication-status.png" alt="Screenshot of the geo-replication map that shows the primary and secondary locations available." data-linktype="relative-path">
</span>
</p>
</li>
</ol>
<p>It will take some time for your data to replicate from the primary to the secondary region.</p>

		<div id="next-section"><hr><div>
		<h2>Next unit: Evaluate storage account failover</h2>
		<p>
			<a href="https://docs.microsoft.com/en-us/learn/modules/provide-disaster-recovery-replicate-storage-data/4-evaluate-storage-account-failover/" data-bi-name="continue">
			<span>Continue</span>
			
			</a>
		</p>
	</div></div>
	</div><section>
		<p>
Need help? See our <a id="troubleshooting-guide" data-bi-name="troubleshooting" href="https://docs.microsoft.com/en-us/learn/support/troubleshooting?uid=learn.azure.provide-disaster-recovery-replicate-storage-data.exercise-change-replication-strategy&amp;documentId=8b7b7dae-f8f4-52a1-9f3d-c407705fd003&amp;versionIndependentDocumentId=644ede4f-769d-b4e0-6112-160184fe7c80&amp;contentPath=%2FMicrosoftDocs%2Flearn-pr%2Fblob%2Flive%2Flearn-pr%2Fazure%2Fprovide-disaster-recovery-replicate-storage-data%2F3-exercise-change-replication-strategy.yml&amp;url=https%3A%2F%2Fdocs.microsoft.com%2Fen-us%2Flearn%2Fmodules%2Fprovide-disaster-recovery-replicate-storage-data%2F3-exercise-change-replication-strategy&amp;author=cwatson">troubleshooting guide</a> or provide specific feedback by <a id="module-unit-feedback-link" data-bi-name="feedback" href="https://docs.microsoft.com/en-us/learn/support/troubleshooting?uid=learn.azure.provide-disaster-recovery-replicate-storage-data.exercise-change-replication-strategy&amp;documentId=8b7b7dae-f8f4-52a1-9f3d-c407705fd003&amp;versionIndependentDocumentId=644ede4f-769d-b4e0-6112-160184fe7c80&amp;contentPath=%2FMicrosoftDocs%2Flearn-pr%2Fblob%2Flive%2Flearn-pr%2Fazure%2Fprovide-disaster-recovery-replicate-storage-data%2F3-exercise-change-replication-strategy.yml&amp;url=https%3A%2F%2Fdocs.microsoft.com%2Fen-us%2Flearn%2Fmodules%2Fprovide-disaster-recovery-replicate-storage-data%2F3-exercise-change-replication-strategy&amp;author=cwatson#report-feedback">reporting an issue</a>.		</p>
	</section></div>
  <span></span> <!-- for IntersectionObserver -->
  
  
  
  


</body><style>body {
      font-size:  13px;
      font-family: Helvetica, Arial, sans-serif;
      width: 600px;
    }
    .page {
      line-height: unset;
    }
    h1, h2, h3 {
      line-height: initial;
    }</style></html>